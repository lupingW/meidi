"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,n,e){return n&&_defineProperties(t.prototype,n),e&&_defineProperties(t,e),t}!function(){var a=localStorage.getItem("carts")?JSON.parse(localStorage.getItem("carts")):{carts:[]},n=JSON.parse(localStorage.getItem("id"));function o(t,n){localStorage.setItem(t,JSON.stringify(n))}function t(){var t=a.carts;try{var n=JSON.parse(localStorage.pxx).goods}catch(t){}!function(t){0<t.length?$(".carts").addClass("hide"):$(".carts").removeClass("hide")}(t);for(var e="",o=0;o<t.length;o++)for(var i=0;i<n.length;i++)t[o].id==n[i].goods_id&&(e+='<li class="common_cart_item">\n                            <div class="product_img left">\n                                <img src='.concat(n[i].hd_thumb_url,'>\n                            </div>\n                            <div class="product_info left">\n                                <div class="product_title">\n                                    <a target="_blank" href="/detail/index?itemid=1000000000100511206101">\n                                    ').concat(n[i].goods_name,' </a>\n                                </div>\n                                <div class="product_sku">\n                                ').concat(n[i].sales_tip,'</div>\n                            </div>\n                            <div class="cart_operation right">\n                                <span class="cart_price">¥').concat((n[i].normal_price/100).toFixed(2),'</span>\n                                <span class="operation_delete js_common_cart_delete" data-id=').concat(n[i].goods_id,">删除</span>\n                            </div>\n                        </li>"));$(".js_common_cart_list").html(e)}$("#btn_cart").attr({data_id:n.id}),$(function(){$("#btn_cart").on("click",function(){!function(){var n=$("#num").val(),e=$("#btn_cart").attr("data_id");if(!a.carts.some(function(t){if(t.id==e)return t.count=parseInt(n),!0})){var t={id:e,count:parseInt(n)};a.carts.push(t)}o("carts",a)}(),t()}),$(".nav_carts").on("click",".operation_delete",function(){var e=$(this).attr("data-id");a.carts.some(function(t){if(t.id===e){var n=a.carts.indexOf(t);return a.carts.splice(n,1),!0}}),o("carts",a),t()}),t(),a.carts.forEach(function(t){t.id==n.id&&$("#num").val(t.count)})}),$("#minus").on("click",function(){var t=$("#num").val();if(!(1<t))return!1;t--,$("#num").val(t)}),$("#plus").on("click",function(){var t=$("#num").val();t++,$("#num").val(t)})}(),function(){function t(t){null===i&&(i=setTimeout(function(){var n=document.documentElement.clientHeight+document.documentElement.scrollTop;t.forEach(function(t){t.top<n&&(t.img.src=t.src)}),i=null},500))}$(function(){var n=$(".tabs_nav_wrap").offset();n=n.top,$(document).on("scroll",function(){var t=$(document).scrollTop();n<=t&&($(".tabs_nav_inner_wrap").addClass(" tabs_nav_fixed"),$(".tabs_nav_right").css({display:"block"}),$(".tabs_nav_left").css({display:"block"})),t<n&&($(".tabs_nav_inner_wrap").removeClass(" tabs_nav_fixed"),$(".tabs_nav_right").css({display:"none"}),$(".tabs_nav_left").css({display:"none"}))})});var n,e,o,i=null;function a(){$(".detail_sprite_detail_floating_qq").animate({marginTop:2}).delay(2e3).animate({marginTop:-2})}n=".img_list",e=document.querySelectorAll(n),t(o=Array.from(e).map(function(t){return{img:t,top:t.offsetTop,src:t.getAttribute("data-src")}})),window.addEventListener("scroll",t.bind(null,o)),$(".detail_sprite_detail_floating_wxcode").on("mouseover",function(){$("#floating_wxcode_content").show()}),$(".detail_sprite_detail_floating_wxcode").on("mouseout",function(){$("#floating_wxcode_content").hide()});var s=setInterval(a,1e3);$(".detail_sprite_detail_floating_qq").on("mouseenter",function(){$(".detail_sprite_detail_floating_qq").stop(!0,!0),clearInterval(s)}),$(".detail_sprite_detail_floating_qq").on("mouseleave",function(){s=setInterval(a,1e3)}),$(".detail_sprite_detail_floating_top").click(function(){$("html").animate({scrollTop:0},500)})}(),(new(function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"init",value:function(){this.leftBox=$(".showcase"),this.clipBox=$("#detailPic"),this.product_left=$(".product_left"),this.zoomPic=$("#zoomPic"),this.zoomPicFather=$(".zoom_pic"),this.magnification=$(".showcase")[0].offsetWidth/$("#detailPic")[0].offsetWidth,this.zoomPic.css({width:this.magnification*this.zoomPicFather[0].offsetWidth,height:this.magnification*this.zoomPicFather[0].offsetHeight}),this.binEvent()}},{key:"binEvent",value:function(){this.leftBox.on("mouseenter",this.showImg.bind(this)),this.leftBox.on("mouseleave",this.hideImg.bind(this)),this.leftBox.on("mousemove",this.follow.bind(this)),$("#thumbnails>li").on("mousemove",function(){$("#thumbnails>li").removeClass("cur"),$(this).addClass("cur");var t=$(this).children().attr("data-t");$("#showcase").attr({src:t});var n=$(this).children().attr("data-b");$("#zoomPic").attr({src:n})})}},{key:"follow",value:function(t){var n=t.clientX,e=t.clientY,o=n-this.leftBox[0].offsetLeft-this.product_left[0].offsetLeft-this.clipBox[0].offsetWidth/2+document.documentElement.scrollLeft,i=e-this.leftBox[0].offsetTop-this.product_left[0].offsetTop-this.clipBox[0].offsetHeight/2+document.documentElement.scrollTop,a=this.leftBox[0].offsetWidth-this.clipBox[0].offsetWidth,s=this.leftBox[0].offsetHeight-this.clipBox[0].offsetHeight;o=a<(o=o<0?0:o)?a:o,i=s<(i=i<0?0:i)?s:i,this.clipBox.css({top:i,left:o}),this.zoomPic.css({top:-i/s*690,left:-o/a*690,position:"absolute"})}},{key:"showImg",value:function(){$(".zoom_pic").css({display:"block"}),$(".detail_pic").css({display:"block"})}},{key:"hideImg",value:function(){$(".zoom_pic").css({display:"none"}),$(".detail_pic").css({display:"none"})}}]),t}())).init(),function(){$(".nav_search").on("mouseenter",function(){$(".nav_search>span").css({display:"none"}),$("#search , .nav_search>i").css({display:"inline-block"}),$("#search ").focus(),$("#search ").animate({width:"205px"}),$(".nav_search>i").animate({left:"-385px"})}),$(document).on("click",function(){"block"==$("#search ").css("display")&&($(".nav_search>i").animate({left:"0px"}),$("#search ").animate({width:"0px"}).queue(function(t){$("#search, .nav_search>i").css({display:"none"}),$(".nav_search>span").css({display:"inline-block"}),t()}))}),$(".nav_phone").on("mouseover",function(){$(".nav_phone>div>img").css({display:"block"})}),$(".nav_phone").on("mouseout",function(){$(".nav_phone>div>img").css({display:"none"})}),$(".nav_carts").on("mouseover",function(){$(".nav_carts .carts").css({display:"block"})}),$(".nav_carts").on("mouseout",function(){$(".nav_carts .carts").css({display:"none"})}),$(".nav_longin").on("mouseover",function(){$(".login_DownMenu").css({display:"block"})}),$(".nav_longin").on("mouseout",function(){$(".login_DownMenu").css({display:"none"})});try{var t=JSON.parse(localStorage.getItem("user"));console.log(t),t&&$(".nav_longin .denglu").html("<div>你好！</div><div>"+t.user+"</div>")}catch(t){}$(".nav_longin").on("click",".out_login",function(){localStorage.removeItem("user"),location.reload()})}(),function(){var t=document.documentElement.clientHeight;$(".zhezhaoceng").css({height:t}),$("#btn_cart").on("click",function(){$(".zhezhaoceng").addClass("show"),$(".mod_layer").addClass("show")}),$(".J_close_text").on("click",function(){$(".zhezhaoceng").removeClass("show"),$(".mod_layer").removeClass("show")}),$(".close_ico").on("click",function(){$(".zhezhaoceng").removeClass("show"),$(".mod_layer").removeClass("show")})}();