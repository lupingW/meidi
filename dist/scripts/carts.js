"use strict";function _classCallCheck(s,a){if(!(s instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,a){for(var t=0;t<a.length;t++){var e=a[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(s,e.key,e)}}function _createClass(s,a,t){return a&&_defineProperties(s.prototype,a),t&&_defineProperties(s,t),s}!function(){var e=new(function(){function s(){_classCallCheck(this,s)}return _createClass(s,[{key:"init",value:function(){this.goodsList=$(".js_shop_100511"),this.all_goods=null,this.GLOBAL_STORE=this.getCarts(),this.result=JSON.parse(localStorage.pxx),this.show(),this.renderList(this.result),this.bindEvent(),this.renderCarts(this.result)}},{key:"show",value:function(){0<this.GLOBAL_STORE.carts.length?($(".gouwuche").addClass("show"),$(".carts_body").addClass("show"),$(".cart_bottom_wrap").addClass("show"),$(".cart_empty").addClass("hide"),$(".carts").addClass("hide")):($(".gouwuche").removeClass("show"),$(".carts_body").removeClass("show"),$(".cart_bottom_wrap").removeClass("show"),$(".cart_empty").removeClass("hide"),$(".carts").removeClass("hide"))}},{key:"renderCarts",value:function(s){this.data=JSON.parse(localStorage.carts).carts,this.show();for(var a="",t=0;t<this.data.length;t++)for(var e=0;e<this.all_goods.length;e++)this.data[t].id==this.all_goods[e].goods_id&&(a+='<li class="common_cart_item">\n                                <div class="product_img left">\n                                    <img src='.concat(this.all_goods[e].hd_thumb_url,'>\n                                </div>\n                                <div class="product_info left">\n                                    <div class="product_title">\n                                        <a target="_blank" href="/detail/index?itemid=1000000000100511206101">\n                                        ').concat(this.all_goods[e].goods_name,' </a>\n                                    </div>\n                                    <div class="product_sku">\n                                    ').concat(this.all_goods[e].sales_tip,'</div>\n                                </div>\n                                <div class="cart_operation right">\n                                    <span class="cart_price">¥').concat((this.all_goods[e].normal_price/100).toFixed(2),'</span>\n                                    <span class="operation_delete js_common_cart_delete" data-id=').concat(this.all_goods[e].goods_id,">删除</span>\n                                </div>\n                            </li>"));$(".js_common_cart_list").html(a)}},{key:"renderList",value:function(s){this.data=JSON.parse(localStorage.carts).carts,this.show(),this.all_goods=s.goods;for(var a="",t=0;t<this.data.length;t++)for(var e=0;e<this.all_goods.length;e++)this.data[t].id==this.all_goods[e].goods_id&&(a+='<div class="item_detail">\n\n                                        <div class="cart_choose">\n                                            <div class="item_choose_wrap3">\n                                                <div class="item_choose_wrap1 item_choose_wrap yes" data-id='.concat(this.data[t].id,'></div>\n                                            </div>\n                                        </div>\n                    \n                                        <div class="item_sub_detail">\n                                            <div class="cart_img">\n                                                <img src=').concat(this.all_goods[e].hd_thumb_url,'>\n                                            </div>\n                                            <div class="cart_product" title="大1P全直流变频空调 一级能效 冷暖挂机 智能操控 KFR-26GW/WXDN8A1@">\n                                                <a target="_blank" href="/detail/index?itemid=1000000000100511235588">\n                                                    ').concat(this.all_goods[e].goods_name,' </a>\n                                            </div>\n                                            <div class="cart_sku">\n                                                <span class="sku_color">').concat(this.all_goods[e].short_name,'</span>\n                                                <span class="sku_spec">').concat(this.all_goods[e].sales_tip,'</span>\n                                            </div>\n                                            <div class="cart_price">\n                                                <span class="price_old">').concat((this.all_goods[e].normal_price/100).toFixed(2),'</span>\n                                            </div>\n                                            <div class="cart_num">                      \n                                                <div class="num_wrap" id="divEditNum_235588" data-type="product" data-id="235588">\n                                                    <span class="minus" data-id=').concat(this.data[t].id," count=").concat(this.data[t].count," price=").concat(this.data[t].price,'> <span class="inner"></span></span>\n                                                    <input class="num" type="text"  value=').concat(this.data[t].count,'>\n                                                    <span class="plus" data-id=').concat(this.data[t].id," count=").concat(this.data[t].count," price=").concat(this.data[t].price,'><span class="inner"></span></span>\n                                                    <div class="cart_product_status js_product_status_235588"></div>\n                                                </div>\n                                            </div>\n                                            <div class="cart_total">').concat((this.all_goods[e].normal_price/100*this.data[t].count).toFixed(2),'</div>\n                                            <div class="cart_operation">\n                                                <span class="operation_delete js_item_delete"  data-id=').concat(this.data[t].id,"\n                                                    >删除</span>\n                                            </div>\n                                        </div>\n                                </div>"));this.goodsList.html(a),this.renderPrice()}},{key:"renderPrice",value:function(){this.all_price=0;for(var s=this.goods_counts=0;s<$(".item_detail").length;s++)if($(".item_detail").eq(s).find(".item_choose_wrap1").hasClass("yes")){var a=parseInt($(".item_detail").eq(s).find(".price_old").html()),t=parseInt($(".item_detail").eq(s).find(".num").val());this.all_price+=a*t,this.goods_counts++}$(".js_total_check").html(this.goods_counts),$(".js_total_price").html(this.all_price.toFixed(2))}},{key:"getCarts",value:function(){return localStorage.getItem("carts")?JSON.parse(localStorage.getItem("carts")):{carts:[]}}},{key:"bindEvent",value:function(){$(".gouwuche").on("click",".minus",function(){var a=$(this).attr("data-id");e.GLOBAL_STORE.carts.some(function(s){if(s.id===a)return 1<s.count&&s.count--,!0}),e.saveDate("carts",e.GLOBAL_STORE)}),$(".gouwuche").on("click",".plus",function(){var a=$(this).attr("data-id");e.GLOBAL_STORE.carts.some(function(s){if(s.id===a)return s.count++,!0}),e.saveDate("carts",e.GLOBAL_STORE)}),$(".gouwuche").on("click",".operation_delete",function(){var t=$(this).attr("data-id");e.GLOBAL_STORE.carts.some(function(s){if(s.id===t){var a=e.GLOBAL_STORE.carts.indexOf(s);return e.GLOBAL_STORE.carts.splice(a,1),!0}}),e.saveDate("carts",e.GLOBAL_STORE)}),$(".nav_carts").on("click",".operation_delete",function(){var t=$(this).attr("data-id");e.GLOBAL_STORE.carts.some(function(s){if(s.id===t){var a=e.GLOBAL_STORE.carts.indexOf(s);return e.GLOBAL_STORE.carts.splice(a,1),!0}}),e.saveDate("carts",e.GLOBAL_STORE)}),$("#top_btn").on("click",".js_sum_choose",function(){$(this).hasClass("yes")?($(this).removeClass("yes"),$(".item_choose_wrap1").removeClass("yes"),$(".b_btn").removeClass("yes")):($(this).addClass("yes"),$(".b_btn").addClass("yes"),$(".item_choose_wrap1").addClass("yes")),e.renderPrice()}),$("#btn_all").on("click",".b_btn",function(){$(this).hasClass("yes")?($(this).removeClass("yes"),$("#top_btn .js_sum_choose").removeClass("yes"),$(".item_choose_wrap1").removeClass("yes")):($(this).addClass("yes"),$("#top_btn .js_sum_choose").addClass("yes"),$(".item_choose_wrap1").addClass("yes")),e.renderPrice()}),$(".js_shop_100511").on("click",".item_choose_wrap1",function(){$(this).toggleClass("yes");for(var s=0,a=0;a<$(".item_choose_wrap1").length;a++)$(".item_choose_wrap1").eq(a).hasClass("yes")&&s++;s==$(".item_choose_wrap1").length?($("#top_btn .js_sum_choose").addClass("yes"),$(".b_btn").addClass("yes")):($("#top_btn .js_sum_choose").removeClass("yes"),$(".b_btn").removeClass("yes")),e.renderPrice()}),$("#all_delete").on("click",function(){$.each($(".item_choose_wrap1"),function(){var t=this;$(this).hasClass("yes")&&(e.GLOBAL_STORE.carts.some(function(s){if(s.id===$(t).attr("data-id")){var a=e.GLOBAL_STORE.carts.indexOf(s);return e.GLOBAL_STORE.carts.splice(a,1),!0}}),e.saveDate("carts",e.GLOBAL_STORE))})})}},{key:"saveDate",value:function(s,a){localStorage.setItem(s,JSON.stringify(a)),this.renderList(this.result),this.renderCarts(this.result)}}]),s}());e.init()}(),function(){$(".nav_search").on("mouseenter",function(){$(".nav_search>span").css({display:"none"}),$("#search , .nav_search>i").css({display:"inline-block"}),$("#search ").focus(),$("#search ").animate({width:"205px"}),$(".nav_search>i").animate({left:"-385px"})}),$(document).on("click",function(){"block"==$("#search ").css("display")&&($(".nav_search>i").animate({left:"0px"}),$("#search ").animate({width:"0px"}).queue(function(s){$("#search, .nav_search>i").css({display:"none"}),$(".nav_search>span").css({display:"inline-block"}),s()}))}),$(".nav_phone").on("mouseover",function(){$(".nav_phone>div>img").css({display:"block"})}),$(".nav_phone").on("mouseout",function(){$(".nav_phone>div>img").css({display:"none"})}),$(".nav_carts").on("mouseover",function(){$(".nav_carts .carts").css({display:"block"})}),$(".nav_carts").on("mouseout",function(){$(".nav_carts .carts").css({display:"none"})}),$(".nav_longin").on("mouseover",function(){$(".login_DownMenu").css({display:"block"})}),$(".nav_longin").on("mouseout",function(){$(".login_DownMenu").css({display:"none"})});try{var s=JSON.parse(localStorage.getItem("user"));s&&$(".nav_longin .denglu").html("<div>你好！</div><div>"+s.user+"</div>")}catch(s){}$(".nav_longin").on("click",".out_login",function(){localStorage.removeItem("user"),location.reload()})}();